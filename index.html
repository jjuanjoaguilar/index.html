<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Trivision TV - Fullscreen</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<style>
  html, body { margin:0; padding:0; width:100%; height:100%; background:black; overflow:hidden; }
  video { width:100%; height:100%; object-fit:cover; background:black; }
</style>
</head>
<body>

<video id="player" autoplay playsinline controls></video>

<script>
const video = document.getElementById('player');
// URL del proxy HLS en Netlify
const streamURL = 'https://tu-app-netlify.netlify.app/.netlify/functions/proxy';

function startHLS() {
  if(Hls.isSupported()){
    const hls = new Hls();
    hls.loadSource(streamURL);
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
    hls.on(Hls.Events.ERROR, (event, data) => {
      if(data.fatal){
        hls.destroy();
        setTimeout(startHLS, 10000); // reconexión automática cada 10s
      }
    });
  } else if(video.canPlayType('application/vnd.apple.mpegurl')){
    video.src = streamURL;
    video.addEventListener('loadedmetadata', ()=>video.play());
  }
}

startHLS();
</script>

</body>
</html>
